imports:
  - backend
  - webapp
  - e2e

targets:
    full_stack_run:
        dependencies: [backend_run, webapp_run]

    full_stack_docker_run:
        dependencies: [backend_docker_build, webapp_docker_build]
        service: exec docker-compose up

    e2e_docker_run:
        dependencies: [backend_docker_build, webapp_docker_build, e2e_docker_build]
        input_paths:
            - docker-compose.e2e.yml
            - docker-compose.yml
            - backend
            - webapp
            - e2e
        output_paths: [target]
        build: docker-compose -f docker-compose.yml -f docker-compose.e2e.yml up --exit-code-from todos-e2e
