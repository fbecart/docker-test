name: backend

targets:
    install_node_dependencies:
        input_paths: [package.json, yarn.lock]
        output_paths: [node_modules]
        build: yarn install

    run:
        dependencies: [install_node_dependencies]
        input_paths: [.]
        service: exec node index.js

    docker_build:
        input_paths: [.]
        build: docker build -t todos/backend .
